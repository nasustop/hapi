(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{1455:function(e,t,a){},"2cbf":function(e,t,a){"use strict";a("73e0")},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},s=[],r=(a("a9e3"),a("09f4")),o={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&Object(r["a"])(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&Object(r["a"])(0,800)}}},n=o,l=(a("2cbf"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"6af373ef",null);t["a"]=c.exports},"373c":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:e.id}},[e.num>1?a("div",{staticClass:"upload-list"},[a("draggable",{staticClass:"components-view",attrs:{options:e.dragIssuesOptions},on:{update:e.draggableUpdate},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},e._l(e.data,(function(t,i){return a("div",{key:i,staticClass:"upload-item",on:{mouseenter:function(t){return e.mouseEnter(i)},mouseleave:e.mouseLeave}},[a("el-image",{staticClass:"upload-item-image",style:"width:"+e.imgSize+"px;height:"+e.imgSize+"px",attrs:{src:t.full_url,fit:"contain"}}),a("div",{staticClass:"upload-item-mask",class:e.picsCurrent===i?"on":""},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.remoteUploadItem(i)}}}),a("i",{staticClass:"el-icon-rank"})])],1)})),0),a("div",{staticClass:"upload-item",on:{click:e.handleImgChange}},[a("i",{staticClass:"el-icon-plus upload-item-icon",style:"width:"+e.imgSize+"px;height:"+e.imgSize+"px;line-height:"+e.imgSize+"px"})])],1):a("div",{staticClass:"upload-list"},[0===e.data.length?a("div",{staticClass:"upload-item",on:{click:e.handleImgChange}},[a("i",{staticClass:"el-icon-plus upload-item-icon",style:"width:"+e.imgSize+"px;height:"+e.imgSize+"px;line-height:"+e.imgSize+"px"})]):e._l(e.data,(function(t,i){return a("div",{key:i,staticClass:"upload-item",on:{mouseenter:function(t){return e.mouseEnter(i)},mouseleave:e.mouseLeave}},[a("el-image",{staticClass:"upload-item-image",style:"width:"+e.imgSize+"px;height:"+e.imgSize+"px",attrs:{src:t.full_url,fit:"contain"},on:{click:e.handleImgChange}})],1)}))],2),a("el-dialog",{staticClass:"store-dialog",attrs:{title:"本地上传",visible:e.dialogVisible,width:"80%","append-to-body":"","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"本地图片"}},[a("div",{staticClass:"upload_box"},[a("el-upload",{staticClass:"upload-demo",attrs:{multiple:!0,action:"",accept:"image/jpeg,image/png,image/gif","show-file-list":!1,"before-upload":e.beforeUploadImage,"http-request":e.handleUpload,"on-success":e.handleUploadSuccess,"on-error":e.uploadError}},[a("el-button",{attrs:{type:"primary"}},[e._v("本地上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过2M ")])],1)],1),a("div",{staticClass:"image-list"},[a("el-row",{attrs:{gutter:20}},e._l(e.list,(function(t,i){return a("el-col",{key:i,attrs:{lg:{span:"4-8"},sm:12,xs:24}},[a("div",{staticClass:"image-item",on:{click:function(a){return e.handleChecked(t,i)}}},[a("el-image",{staticClass:"image",attrs:{src:t.full_url,fit:"contain"}}),t.isChecked?a("div",{staticClass:"maskSelect"},[a("i",{staticClass:"el-icon-check icon"})]):e._e()],1)])})),1)],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{align:"center",total:e.total,page:e.listQuery.page,"page-sizes":[10,20,30],limit:e.listQuery.page_size},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"page_size",t)},pagination:e.getList}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)])],1)},s=[],r=a("c7eb"),o=a("1da1"),n=(a("a9e3"),a("d3b7"),a("159b"),a("4ec9"),a("b64b"),a("6062"),a("a434"),a("4de4"),a("e4ec")),l=a("ed08"),c=a("333d"),u=a("1980"),h=a.n(u),d={name:"SchemaDialogUploadImg",components:{Pagination:c["a"],draggable:h.a},props:{num:{type:Number,default:function(){return 1}},dialogRelImg:{type:String,default:function(){return""}},dialogRelData:{type:Array,default:function(){return[]}},imgSize:{type:Number,default:function(){return 178}}},data:function(){return{id:"",data:[],picsCurrent:-1,dragIssuesOptions:{animation:300,forceFallback:!1,scroll:!0,handle:".el-icon-rank",draggable:".upload-item"},dialogVisible:!1,listQuery:{page:1,page_size:10},total:0,list:[],checkIds:[],checkData:[]}},watch:{dialogRelImg:{immediate:!0,handler:function(e){this.num>1||(this.data=e?[{full_url:e}]:[])}},dialogRelData:{immediate:!0,handler:function(e){if(!(this.num<=1)){var t=[];e.forEach((function(e){t.push({full_url:e})})),this.data=structuredClone(t)}}}},methods:{mouseEnter:function(e){this.picsCurrent=e},mouseLeave:function(){this.picsCurrent=-1},remoteUploadItem:function(e){this.picsCurrent=-1,this.data.splice(e,1)},draggableUpdate:function(){this.handleSubmit()},handleImgChange:function(e){this.dialogVisible=!0,this.checkIds=[],this.checkData=[],this.getList()},handleClose:function(){this.checkIds=[],this.checkData=[],this.dialogVisible=!1},getList:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(n["d"])(e.listQuery);case 3:a=t.sent,i=a.data,i.list.forEach((function(t){t.isChecked=-1!==e.checkIds.indexOf(t.img_id)})),e.list=i.list,e.total=i.total,e.listLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},handleChecked:function(e,t){e.isChecked?(e.isChecked=!1,this.checkData=structuredClone(this.checkData.filter((function(t){return t.img_id!==e.img_id}))),this.checkIds=structuredClone(this.checkIds.filter((function(t){return t!==e.img_id})))):1===this.num?(e.isChecked=!0,this.list.forEach((function(t){t.img_id!==e.img_id&&t.isChecked&&(t.isChecked=!1)})),this.checkData=[e],this.checkIds=[e.img_id]):this.checkIds.length+this.data.length>=this.num?this.$message.warning("最多只能选择"+this.num+"张图片"):(e.isChecked=!0,this.checkData.push(e),this.checkIds.push(e.img_id)),this.$forceUpdate()},handleSubmit:function(){var e=this;if(this.num>1){this.checkData.forEach((function(t){e.data.push(t)}));var t=[];this.data.forEach((function(e){t.push(e.full_url)})),this.$emit("check-change",t)}else{this.data=structuredClone(this.checkData);var a="";this.data.forEach((function(e){a=e.full_url})),this.$emit("check-change",a)}this.handleClose()},beforeUploadImage:function(e){return Object(l["a"])(e)},handleUpload:function(e){Object(n["c"])(e.file).then((function(t){return e.onSuccess(t)}),(function(t){return e.onError(t)})).catch((function(t){return e.onError(t)}))},handleUploadSuccess:function(e,t){this.$message({message:"上传成功",type:"success",duration:5e3}),this.getList()},uploadError:function(e){console.error(e)}}},m=d,p=(a("abbd"),a("2877")),g=Object(p["a"])(m,i,s,!1,null,"ed80b96c",null);t["a"]=g.exports},"6a3f":function(e,t,a){"use strict";a("1455")},"73e0":function(e,t,a){},7563:function(e,t,a){},"799c":function(module,__webpack_exports__,__webpack_require__){"use strict";var _app_hshop_admin_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c7eb"),_app_hshop_admin_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1da1"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_4__),_utils_request__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b775"),_components_Pagination__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("333d"),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ed08");__webpack_exports__["a"]={name:"SchemaTableIndex",components:{Pagination:_components_Pagination__WEBPACK_IMPORTED_MODULE_6__["a"]},props:{schema:{type:Object,default:function(){return{}}}},data:function(){return{hasFilter:!1,extend:!0,showExtend:!1,headerSchema:{},headerFiltersSchema:{},headerActionsSchema:{},tableSchema:{},tableColumnsSchema:{},tableActionsSchema:{},loading:!1,tableURI:"",tableRowKey:"id",tableMethod:"get",tableQuery:{page:1,page_size:20},tableData:[],tableTotal:0}},computed:{filterBoxClass:function(){return{"schema-filter":!0,"schema-filter-extend":this.extend}}},created:function(){var e=this;window.onresize=function(){e.checkShowExtend()}},mounted:function(){var e=this;this.schema.header&&(this.headerSchema=this.schema.header),this.schema.table&&(this.tableSchema=this.schema.table),this.headerSchema.filter&&(this.headerFiltersSchema=this.headerSchema.filter,this.hasFilter=!Object(_utils__WEBPACK_IMPORTED_MODULE_7__["c"])(this.headerFiltersSchema)),this.headerSchema.actions&&(this.headerActionsSchema=this.headerSchema.actions),this.tableSchema.url&&(this.tableURI=this.tableSchema.url.const),this.tableSchema.method&&(this.tableMethod=this.tableSchema.url.method),this.tableSchema.page&&(this.tableQuery.page=this.tableSchema.page),this.tableSchema.page_size&&(this.tableQuery.page_size=this.tableSchema.page_size),this.tableSchema.key&&(this.tableRowKey=this.tableSchema.key),this.tableSchema.columns&&(this.tableColumnsSchema=this.tableSchema.columns),this.tableSchema.actions&&(this.tableActionsSchema=this.tableSchema.actions),this.tableURI&&this.getTableData(),this.$nextTick((function(){e.checkShowExtend()}))},methods:{handleExtend:function(){this.extend=!this.extend},resetFilterForm:function(){this.$refs["filterForm"].resetFields(),this.tableQuery.page=1,this.getTableData()},checkShowExtend:function(){if(!this.hasFilter)return!1;var e=this.$refs.schema_filter_items.clientWidth,t=0,a=1;this.$refs.filterForm.$children.forEach((function(i){t+=i.$el.clientWidth+30,t>e&&(a++,t=i.$el.clientWidth+30)})),this.showExtend=a>2},handleFilter:function(){this.tableQuery.page=1,this.getTableData()},getTableData:function(){var e=this;return Object(_app_hshop_admin_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(_app_hshop_admin_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__["a"])().mark((function t(){var a;return Object(_app_hshop_admin_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,a={url:e.tableURI,method:e.tableMethod},t.t0=a.method,t.next="get"===t.t0?5:"post"===t.t0?7:9;break;case 5:return a.params=e.tableQuery,t.abrupt("break",9);case 7:return a.data=e.tableQuery,t.abrupt("break",9);case 9:Object(_utils_request__WEBPACK_IMPORTED_MODULE_5__["a"])(a).then((function(t){0===t["code"]&&(e.tableData=t.data.list,e.tableTotal=t.data.total),e.loading=!1}));case 10:case"end":return t.stop()}}),t)})))()},tableActionShow:function tableActionShow(item,row){return!item["vShow"]||(item["vShow"]=eval(item["vShow"]),item["vShow"](row))},handleActions:function(e){this.tableActions(e,this.tableQuery)},tableActions:function(e,t){var a=this;e["jump"]?this.jumpActions(e,t):e["confirm"]?this.$confirm(e["confirm"]["message"],e["confirm"]["title"]?e["confirm"]["title"]:"警告",{confirmButtonText:e["confirm"]["confirmButtonText"]?e["confirm"]["confirmButtonText"]:"确定",cancelButtonText:e["confirm"]["cancelButtonText"]?e["confirm"]["cancelButtonText"]:"取消",type:e["confirm"]["type"]?e["confirm"]["type"]:"warning"}).then((function(){a.requestActions(e,t)})):this.requestActions(e,t)},jumpActions:function(e,t){var a={path:e.url.const};if(e.url.query){var i={};for(var s in e.url.query){var r=e.url.query[s];t[s]&&(i[r]=t[s])}i&&(a.query=i)}this.$router.push(a)},requestActions:function(e,t){var a=this;return Object(_app_hshop_admin_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__["a"])(Object(_app_hshop_admin_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__["a"])().mark((function i(){var s,r,o,n;return Object(_app_hshop_admin_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.loading=!0,s={url:e.url.const,method:"get"},e.url.method&&(s.method=e.url.method),!e.url.query){i.next=13;break}for(o in r={},e.url.query)n=e.url.query[o],t[o]&&(r[n]=t[o]);i.t0=s.method,i.next="get"===i.t0?9:"post"===i.t0?11:13;break;case 9:return s.params=r,i.abrupt("break",13);case 11:return s.data=r,i.abrupt("break",13);case 13:Object(_utils_request__WEBPACK_IMPORTED_MODULE_5__["a"])(s).then((function(t){0===t["code"]&&e.url["notice"]&&e.url["notice"].success?a.$notify({title:e.url["notice"].success.title?e.url["notice"].success.title:"error",message:e.url["notice"].success.message?e.url["notice"].success.message:t["msg"],type:e.url["notice"].success.type?e.url["notice"].success.type:"success",duration:e.url["notice"].success.duration?e.url["notice"].success.duration:2e3,onClose:function(){a.loading=!1,!1!==e.url["notice"].success.refresh&&a.getTableData()}}):0!==t["code"]&&e.url["notice"]&&e.url["notice"].error?a.$notify({title:e.url["notice"].error.title?e.url["notice"].error.title:"error",message:e.url["notice"].error.message?e.url["notice"].error.message:t["msg"],type:e.url["notice"].error.type?e.url["notice"].error.type:"error",duration:e.url["notice"].error.duration?e.url["notice"].error.duration:2e3,onClose:function(){a.loading=!1,!1!==e.url["notice"].error.refresh&&a.getTableData()}}):0===t["code"]&&e.url["refresh"]?a.getTableData():0===t["code"]&&e["is_search"]?(a.tableData=t.data.list,a.tableTotal=t.data.total,a.loading=!1):a.loading=!1}));case 14:case"end":return i.stop()}}),i)})))()}}}},"7c86":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"500px"}},[e.showTable?a("schema-table-index",{attrs:{schema:e.schemaData}}):e._e(),e.showForm?a("schema-form-index",{attrs:{schema:e.schemaData}}):e._e()],1)},s=[],r=a("c7eb"),o=a("1da1"),n=a("b775"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[a("el-form",{ref:"ruleForm",style:void 0!==e.formSchemaData.style?e.formSchemaData.style:"width: 80%;margin: auto",attrs:{model:e.ruleForm,rules:e.rules,"label-position":void 0!==e.formSchemaData.labelPosition?e.formSchemaData.labelPosition:"right","label-width":void 0!==e.formSchemaData.labelWidth?e.formSchemaData.labelWidth:"70px"}},e._l(e.formSchemaData.columns,(function(t,i){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:void 0===t.show||t.show,expression:"item.show !== undefined ? item.show : true"}],key:i,style:void 0!==t.style?t.style:"width:70%;margin: auto auto 22px auto;",attrs:{label:t.title,prop:i}},["avatar"===t.type?a("div",{staticClass:"avatar-uploader",on:{click:function(t){return e.showImagecropper(i)}}},[a("div",{staticClass:"el-upload el-upload--text"},[e.ruleForm[i]?a("img",{staticClass:"avatar",attrs:{src:e.ruleForm[i],alt:""}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]):"image"===t.type?[t.num&&t.num>1?a("schema-dialog-upload-img",{attrs:{num:t.num,"dialog-rel-data":e.ruleForm[i]},on:{"check-change":function(t){return e.dialogUploadImgChange(i,t)}}}):a("schema-dialog-upload-img",{attrs:{"dialog-rel-img":e.ruleForm[i]},on:{"check-change":function(t){return e.dialogUploadImgChange(i,t)}}})]:"tree"===t.type?a("el-tree",{ref:e.getTreeRef(i,t),refInFor:!0,staticClass:"permission-tree",attrs:{"check-strictly":void 0!==t.checkStrictly&&t.checkStrictly,data:void 0!==t.data?t.data:[],props:void 0!==t.props?t.props:{children:"children",label:"label"},"show-checkbox":"","node-key":void 0!==t.dataKey?t.dataKey:i},on:{"check-change":function(a,s,r){return e.treeCheckChange(a,s,r,i,t["dataKey"],void 0!==t.ref?t.ref:i+"TreeRef")}}}):"switch"===t.type?a("el-switch",{attrs:{"active-color":void 0!==t.activeColor?t.activeColor:"#13ce66","inactive-color":void 0!==t.inactiveColor?t.inactiveColor:"#ff4949","active-text":void 0!==t.activeText?t.activeText:"","inactive-text":void 0!==t.inactiveText?t.inactiveText:""},model:{value:e.ruleForm[i],callback:function(t){e.$set(e.ruleForm,i,t)},expression:"ruleForm[index]"}}):"span"===t.type?[e._v(" "+e._s(t.value)+" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.ruleForm[i],callback:function(t){e.$set(e.ruleForm,i,t)},expression:"ruleForm[index]"}})]:"dialog"===t.type?a("schema-dialog-table",{attrs:{"dialog-schema":t,"dialog-rel-data":e.ruleForm[i]},on:{"check-change":function(t){return e.dialogTableChange(i,t)}}}):"dynamic-form-array"===t.type?a("schema-dynamic-form-array",{attrs:{"dynamic-schema":t,"dynamic-rel-data":e.ruleForm[i]},on:{change:function(t){return e.dynamicFormArrayChange(i,t)}}}):"radio"===t.type?a("el-radio-group",{model:{value:e.ruleForm[i],callback:function(t){e.$set(e.ruleForm,i,t)},expression:"ruleForm[index]"}},[e._l(t.radio,(function(t,i){return[a("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])]}))],2):a("el-input",{attrs:{type:t.type,"show-password":void 0!==t.showPassword&&t.showPassword,placeholder:t.placeholder,clearable:t.clearable,disabled:t.disabled,"prefix-icon":t.prefixIcon,"suffix-icon":t.suffixIcon,readonly:t.readonly,max:t.max,min:t.min},model:{value:e.ruleForm[i],callback:function(t){e.$set(e.ruleForm,i,t)},expression:"ruleForm[index]"}})],2)})),1),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},e._l(e.actionsSchemaData,(function(t,i){return a("el-button",{key:i,attrs:{type:void 0!==t.type?t.type:""},on:{click:function(a){return e.btnClick(t)}}},[e._v(" "+e._s(t.title)+" ")])})),1),a("image-cropper",{directives:[{name:"show",rawName:"v-show",value:e.imagecropperShow,expression:"imagecropperShow"}],key:e.imagecropperKey,attrs:{url:e.uploadUrl,width:300,height:300,field:"upload","lang-type":"zh"},on:{close:e.close,"crop-upload-success":e.cropSuccess}})],1)},c=[],u=a("8764"),h=u["a"],d=a("2877"),m=Object(d["a"])(h,l,c,!1,null,"5c645714",null),p=m.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._l(e.headerActionsSchema,(function(t,i){return a("el-button",{key:i,class:t.class?t.class:"filter-item",style:t.style?t.style:"",attrs:{type:t.type?t.type:"primary",icon:t.icon?t.icon:"",size:t.size?t.size:"small"},on:{click:function(a){return e.handleActions(t)}}},[e._v(" "+e._s(t.title)+" ")])})),e.hasFilter?a("div",{class:e.filterBoxClass},[a("div",{ref:"schema_filter_items",staticClass:"schema-filter-items"},[a("div",{ref:"schema_filter_form_box"},[a("el-form",{ref:"filterForm",attrs:{inline:!0}},e._l(e.headerFiltersSchema,(function(t,i){return a("el-form-item",{key:i,staticClass:"schema-filter-items-form-item",attrs:{label:t.title?t.title:""}},["select"===t.type?a("el-select",{key:i,class:t.class?t.class:"",style:t.style?t.style:"",attrs:{placeholder:t.placeholder?t.placeholder:"",clearable:!!t.clearable&&t.clearable},model:{value:e.tableQuery[i],callback:function(t){e.$set(e.tableQuery,i,t)},expression:"tableQuery[index]"}},e._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):a("el-input",{key:i,class:t.class?t.class:"",style:t.style?t.style:"",attrs:{type:t.type?t.type:"input",placeholder:t.placeholder?t.placeholder:"",clearable:!!t.clearable&&t.clearable},model:{value:e.tableQuery[i],callback:function(t){e.$set(e.tableQuery,i,t)},expression:"tableQuery[index]"}})],1)})),1)],1)]),a("div",{staticClass:"schema-filter-actions"},[a("div",{staticClass:"schema-filter-actions-btn"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh-left"},on:{click:e.resetFilterForm}},[e._v("重置")])],1),e.showExtend?a("div",{staticClass:"schema-filter-actions-extend"},[a("el-button",{class:e.extend?"el-icon-arrow-down":"el-icon-arrow-up",attrs:{type:"text"},on:{click:e.handleExtend}},[e._v(e._s(e.extend?"展开":"收起"))])],1):e._e()])]):e._e(),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dragTable",attrs:{data:e.tableData,"default-expand-all":!0,"row-key":function(t){return t[e.tableRowKey].toString()},border:"",fit:"","highlight-current-row":""}},[e._l(e.tableColumnsSchema,(function(t,i){return a("el-table-column",{key:i,attrs:{align:t.align?t.align:"","class-name":t.class?t.class:"",width:t.width?t.width:"",label:t.title,fixed:!!t.fixed&&t.fixed},scopedSlots:e._u([{key:"default",fn:function(s){var r=s.row;return["avatar"===t.type?a("el-image",{staticClass:"img-circle",attrs:{src:r[i]}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),a("span",{staticClass:"dot"},[e._v("...")])])]):"image"===t.type?a("el-image",{staticClass:"table-image",attrs:{src:r[i]}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),a("span",{staticClass:"dot"},[e._v("...")])])]):"tag"===t.type?[t.tag&&t.tag[r[i]]?a("el-tag",{attrs:{type:t.tag[r[i]].type}},[e._v(e._s(t.tag[r[i]].message))]):e._e()]:a("span",[e._v(e._s(r[i]))])]}}],null,!0)})})),e.tableActionsSchema?a("el-table-column",{attrs:{label:"操作",width:"260","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return e._l(e.tableActionsSchema,(function(t,s){return a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.tableActionShow(t,i),expression:"tableActionShow(item, row)"}],key:s,class:t.class?t.class:"filter-item",style:t.style?t.style:"",attrs:{type:t.type?t.type:"primary",icon:t.icon?t.icon:"",size:t.size?t.size:"mini"},on:{click:function(a){return e.tableActions(t,i)}}},[e._v(" "+e._s(t.title)+" ")])}))}}],null,!1,2088144131)}):e._e()],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableTotal>0,expression:"tableTotal>0"}],attrs:{align:"center",total:e.tableTotal,page:e.tableQuery.page,limit:e.tableQuery.page_size},on:{"update:page":function(t){return e.$set(e.tableQuery,"page",t)},"update:limit":function(t){return e.$set(e.tableQuery,"page_size",t)},pagination:e.getTableData}})],2)},_=[],f=a("799c"),b=f["a"],v=Object(d["a"])(b,g,_,!1,null,"52dffcff",null),y=v.exports,w={name:"SchemaIndex",components:{SchemaTableIndex:y,SchemaFormIndex:p},props:{uri:{type:String,default:""},schema:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,showTable:!1,showForm:!1,schemaData:{}}},watch:{uri:function(e){e&&this.getSchemaByURI()}},mounted:function(){this.uri?this.getSchemaByURI():this.setSchema(this.schema)},methods:{getSchemaByURI:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.apiGetSchema();case 3:a=t.sent,i=a.data,e.setSchema(i),e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},apiGetSchema:function(){return Object(n["a"])({url:this.uri,method:"get",params:this.$route.query})},setSchema:function(e){switch(e.type){case"table":this.showTable=!0;break;case"form":this.showForm=!0;break}this.schemaData=e}}},S=w,k=Object(d["a"])(S,i,s,!1,null,"6397cef3",null);t["a"]=k.exports},"83fd":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.addFormItem}},[e._v(e._s(e.schema.title))]),e._l(e.dynamicValidateForm,(function(t,i){return[a("el-form",{key:i,attrs:{inline:!0,model:t}},[e._l(e.formSchemaData,(function(s,r){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:void 0===s.show||s.show,expression:"item.show !== undefined ? item.show : true"}],key:r,attrs:{prop:r}},["image"===s.type?[a("schema-dialog-upload-img",{attrs:{id:r+"-upload-img","dialog-rel-img":t[r],"img-size":50},on:{"check-change":function(t){return e.dialogUploadImgChange(i,r,t)}}})]:"switch"===s.type?a("el-switch",{attrs:{"active-color":void 0!==s.activeColor?s.activeColor:"#13ce66","inactive-color":void 0!==s.inactiveColor?s.inactiveColor:"#ff4949","active-text":void 0!==s.activeText?s.activeText:"","inactive-text":void 0!==s.inactiveText?s.inactiveText:""},model:{value:t[r],callback:function(a){e.$set(t,r,a)},expression:"dynamicItem[index]"}}):"span"===s.type?[e._v(" "+e._s(s.value)+" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:t[r],callback:function(a){e.$set(t,r,a)},expression:"dynamicItem[index]"}})]:"dialog"===s.type?a("schema-dialog-table",{attrs:{"dialog-schema":s,"dialog-rel-data":t[r]},on:{"check-change":function(t){return e.dialogTableChange(i,r,t)}}}):"radio"===s.type?a("el-radio-group",{model:{value:t[r],callback:function(a){e.$set(t,r,a)},expression:"dynamicItem[index]"}},[e._l(s.radio,(function(t,i){return[a("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])]}))],2):a("el-input",{attrs:{type:s.type,"show-password":void 0!==s.showPassword&&s.showPassword,placeholder:s.placeholder,clearable:s.clearable,disabled:s.disabled,"prefix-icon":s.prefixIcon,"suffix-icon":s.suffixIcon,readonly:s.readonly,max:s.max,min:s.min},model:{value:t[r],callback:function(a){e.$set(t,r,a)},expression:"dynamicItem[index]"}})],2)})),a("el-form-item",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"20px"},on:{click:function(t){return e.deleteFormItem(i)}}})])],1)],2)]}))],2)},s=[],r=(a("4ec9"),a("b64b"),a("d3b7"),a("6062"),a("e9c4"),a("a434"),a("373c")),o=a("f1f3"),n={name:"SchemaDynamicFormArray",components:{SchemaDialogUploadImg:r["a"],SchemaDialogTable:o["a"]},props:{dynamicSchema:{type:Object,default:function(){return{}}},dynamicRelData:{type:Array,default:function(){return[]}}},data:function(){return{schema:{},formSchemaData:{},ruleForm:{},dynamicValidateForm:[]}},watch:{dynamicSchema:{deep:!0,immediate:!0,handler:function(e){this.schema=e,this.formSchemaData=e["dynamic-form-array"].form,this.ruleForm=e["dynamic-form-array"].ruleForm,this.dynamicValidateForm=[],this.dynamicValidateForm.push(structuredClone(this.ruleForm))}},dynamicValidateForm:{deep:!0,immediate:!0,handler:function(e){this.$emit("change",e)}},dynamicRelData:{immediate:!0,handler:function(e){JSON.stringify(e)!==JSON.stringify(this.dynamicValidateForm)&&(this.dynamicValidateForm=structuredClone(e))}}},methods:{addFormItem:function(){this.dynamicValidateForm.push(structuredClone(this.ruleForm))},deleteFormItem:function(e){this.dynamicValidateForm.splice(e,1)},dialogTableChange:function(e,t,a){this.dynamicValidateForm[e][t]=a},dialogUploadImgChange:function(e,t,a){this.dynamicValidateForm[e][t]=a}}},l=n,c=(a("afd9"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"7f7bc57a",null);t["a"]=u.exports},8764:function(module,__webpack_exports__,__webpack_require__){"use strict";var _app_hshop_admin_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b85c"),_api_system_uploads__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e4ec"),_components_ImageCropper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("896b"),_utils_request__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b775"),_components_Schema_dialog_table__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("f1f3"),_components_Schema_dialog_uploadImg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("373c"),_components_Schema_dynamic_formArray__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("83fd");__webpack_exports__["a"]={name:"SchemaFormIndex",components:{SchemaDynamicFormArray:_components_Schema_dynamic_formArray__WEBPACK_IMPORTED_MODULE_6__["a"],SchemaDialogUploadImg:_components_Schema_dialog_uploadImg__WEBPACK_IMPORTED_MODULE_5__["a"],SchemaDialogTable:_components_Schema_dialog_table__WEBPACK_IMPORTED_MODULE_4__["a"],ImageCropper:_components_ImageCropper__WEBPACK_IMPORTED_MODULE_2__["a"]},props:{schema:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,schemaData:{},formSchemaData:{},actionsSchemaData:{},ruleForm:{},rules:{},treeRef:[],imagecropperShow:!1,imagecropperIndex:"",imagecropperKey:0,dialogSchema:{},dialogVisible:!1}},computed:{uploadUrl:function(){return"/api/backend"+_api_system_uploads__WEBPACK_IMPORTED_MODULE_1__["a"]}},mounted:function(){this.setSchema(this.schema)},methods:{setSchema:function setSchema(data){var _this=this;if(data.form&&(this.formSchemaData=data.form),data.ruleForm&&(this.ruleForm=data.ruleForm),data.rules)for(var field in this.rules=data.rules,this.rules)for(var key in this.rules[field])this.rules[field][key].validator&&(this.rules[field][key].validator=eval(this.rules[field][key].validator));if(data.actions&&(this.actionsSchemaData=data.actions),data.form.uri){var requestData={url:data.form.uri.const,method:"get"};switch(data.form.uri.method&&(requestData.method=data.form.uri.method.toLowerCase()),requestData.method){case"get":requestData.params=this.$route.query;break;case"post":requestData.data=this.$route.query;break}Object(_utils_request__WEBPACK_IMPORTED_MODULE_3__["a"])(requestData).then((function(e){for(var t in _this.ruleForm)e.data[t]&&(_this.ruleForm[t]=e.data[t]);for(var a in _this.treeRef)_this.$refs[_this.treeRef[a]][0].setCheckedKeys(_this.ruleForm[a])}))}},treeCheckChange:function(e,t,a,i,s,r){var o,n=this.$refs[r][0].getCheckedNodes(),l=[],c=Object(_app_hshop_admin_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__["a"])(n);try{for(c.s();!(o=c.n()).done;){var u=o.value;l.push(u[s])}}catch(h){c.e(h)}finally{c.f()}this.ruleForm[i]=l},dialogTableChange:function(e,t){this.ruleForm[e]=t},dialogUploadImgChange:function(e,t){this.ruleForm[e]=t},dynamicFormArrayChange:function(e,t){this.ruleForm[e]=t},btnClick:function(e){switch(e.action){case"rollback":this.$router.go(-1);break;case"reset":this.$refs["ruleForm"].resetFields();break;case"request":this.submitForm(e);break}},submitForm:function(e){var t=this;this.$refs["ruleForm"].validate((function(a){if(!a)return!1;t.loading=!0;var i={url:e.url.const,method:"post"};switch(e.url.method&&(i.method=e.url.method.toLowerCase()),i.method){case"get":e.url["hasFilter"]?i.params={filter:t.$route.query,params:t.ruleForm}:i.params=t.ruleForm;break;case"post":e.url["hasFilter"]?i.data={filter:t.$route.query,params:t.ruleForm}:i.data=t.ruleForm;break}Object(_utils_request__WEBPACK_IMPORTED_MODULE_3__["a"])(i).then((function(a){0===a["code"]&&e.url["notice"].success?t.$notify({title:e.url["notice"].success.title?e.url["notice"].success.title:"error",message:e.url["notice"].success.message?e.url["notice"].success.message:a["msg"],type:e.url["notice"].success.type?e.url["notice"].success.type:"success",duration:e.url["notice"].success.duration?e.url["notice"].success.duration:2e3,onClose:function(){t.loading=!1,!1!==e.url["notice"].success.rollback&&t.$router.go(-1)}}):0!==a["code"]&&e.url["notice"].error?t.$notify({title:e.url["notice"].error.title?e.url["notice"].error.title:"error",message:e.url["notice"].error.message?e.url["notice"].error.message:a["msg"],type:e.url["notice"].error.type?e.url["notice"].error.type:"error",duration:e.url["notice"].error.duration?e.url["notice"].error.duration:2e3,onClose:function(){t.loading=!1,!1!==e.url["notice"].error.rollback&&t.$router.go(-1)}}):t.loading=!1}))}))},getTreeRef:function(e,t){var a=t.ref?t.ref:e+"TreeRef";return this.treeRef[e]=a,a},showImagecropper:function(e){this.imagecropperShow=!0,this.imagecropperIndex=e},cropSuccess:function(e){this.imagecropperShow=!1,this.imagecropperKey=this.imagecropperKey+1,this.ruleForm[this.imagecropperIndex]=e["full_url"]},close:function(){this.imagecropperShow=!1}}}},"896b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"vue-image-crop-upload"},[a("div",{staticClass:"vicp-wrap"},[a("div",{staticClass:"vicp-close",on:{click:e.off}},[a("i",{staticClass:"vicp-icon4"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step == 1"}],staticClass:"vicp-step1"},[a("div",{staticClass:"vicp-drop-area",on:{dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,click:e.handleClick,drop:e.handleChange}},[a("i",{directives:[{name:"show",rawName:"v-show",value:1!=e.loading,expression:"loading != 1"}],staticClass:"vicp-icon1"},[a("i",{staticClass:"vicp-icon1-arrow"}),a("i",{staticClass:"vicp-icon1-body"}),a("i",{staticClass:"vicp-icon1-bottom"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:1!==e.loading,expression:"loading !== 1"}],staticClass:"vicp-hint"},[e._v(e._s(e.lang.hint))]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isSupported,expression:"!isSupported"}],staticClass:"vicp-no-supported-hint"},[e._v(e._s(e.lang.noSupported))]),1==e.step?a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileinput",attrs:{type:"file"},on:{change:e.handleChange}}):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[a("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+" ")]),a("div",{staticClass:"vicp-operate"},[a("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.off))])])]),2==e.step?a("div",{staticClass:"vicp-step2"},[a("div",{staticClass:"vicp-crop"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-left"},[a("div",{staticClass:"vicp-img-container"},[a("img",{ref:"img",staticClass:"vicp-img",style:e.sourceImgStyle,attrs:{src:e.sourceImgUrl,draggable:"false"},on:{drag:e.preventDefault,dragstart:e.preventDefault,dragend:e.preventDefault,dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,drop:e.preventDefault,touchstart:e.imgStartMove,touchmove:e.imgMove,touchend:e.createImg,touchcancel:e.createImg,mousedown:e.imgStartMove,mousemove:e.imgMove,mouseup:e.createImg,mouseout:e.createImg}}),a("div",{staticClass:"vicp-img-shade vicp-img-shade-1",style:e.sourceImgShadeStyle}),a("div",{staticClass:"vicp-img-shade vicp-img-shade-2",style:e.sourceImgShadeStyle})]),a("div",{staticClass:"vicp-range"},[a("input",{attrs:{type:"range",step:"1",min:"0",max:"100"},domProps:{value:e.scale.range},on:{input:e.zoomChange}}),a("i",{staticClass:"vicp-icon5",on:{mousedown:e.startZoomSub,mouseout:e.endZoomSub,mouseup:e.endZoomSub}}),a("i",{staticClass:"vicp-icon6",on:{mousedown:e.startZoomAdd,mouseout:e.endZoomAdd,mouseup:e.endZoomAdd}})]),e.noRotate?e._e():a("div",{staticClass:"vicp-rotate"},[a("i",{on:{mousedown:e.startRotateLeft,mouseout:e.endRotate,mouseup:e.endRotate}},[e._v("↺")]),a("i",{on:{mousedown:e.startRotateRight,mouseout:e.endRotate,mouseup:e.endRotate}},[e._v("↻")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-right"},[a("div",{staticClass:"vicp-preview"},[e.noSquare?e._e():a("div",{staticClass:"vicp-preview-item"},[a("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),a("span",[e._v(e._s(e.lang.preview))])]),e.noCircle?e._e():a("div",{staticClass:"vicp-preview-item vicp-preview-item-circle"},[a("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),a("span",[e._v(e._s(e.lang.preview))])])])])]),a("div",{staticClass:"vicp-operate"},[a("a",{on:{click:function(t){return e.setStep(1)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),a("a",{staticClass:"vicp-operate-btn",on:{click:e.prepareUpload,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.save))])])]):e._e(),3==e.step?a("div",{staticClass:"vicp-step3"},[a("div",{staticClass:"vicp-upload"},[a("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-loading"},[e._v(e._s(e.lang.loading))]),a("div",{staticClass:"vicp-progress-wrap"},[a("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-progress",style:e.progressStyle})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[a("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.loading,expression:"loading === 2"}],staticClass:"vicp-success"},[a("i",{staticClass:"vicp-icon3"}),e._v(" "+e._s(e.lang.success)+" ")])]),a("div",{staticClass:"vicp-operate"},[a("a",{on:{click:function(t){return e.setStep(2)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),a("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.close))])])]):e._e(),a("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:e.width,height:e.height}})])])},s=[],r=a("53ca"),o=(a("a9e3"),a("d3b7"),a("159b"),a("b64b"),a("b775")),n={zh:{hint:"点击，或拖动图片至此处",loading:"正在上传……",noSupported:"浏览器不支持该功能，请使用IE10以上或其他现在浏览器！",success:"上传成功",fail:"图片上传失败",preview:"头像预览",btn:{off:"取消",close:"关闭",back:"上一步",save:"保存"},error:{onlyImg:"仅限图片格式",outOfSize:"单文件大小不能超过 ",lowestPx:"图片最低像素为（宽*高）："}},"zh-tw":{hint:"點擊，或拖動圖片至此處",loading:"正在上傳……",noSupported:"瀏覽器不支持該功能，請使用IE10以上或其他現代瀏覽器！",success:"上傳成功",fail:"圖片上傳失敗",preview:"頭像預覽",btn:{off:"取消",close:"關閉",back:"上一步",save:"保存"},error:{onlyImg:"僅限圖片格式",outOfSize:"單文件大小不能超過 ",lowestPx:"圖片最低像素為（寬*高）："}},en:{hint:"Click or drag the file here to upload",loading:"Uploading…",noSupported:"Browser is not supported, please use IE10+ or other browsers",success:"Upload success",fail:"Upload failed",preview:"Preview",btn:{off:"Cancel",close:"Close",back:"Back",save:"Save"},error:{onlyImg:"Image only",outOfSize:"Image exceeds size limit: ",lowestPx:"Image's size is too low. Expected at least: "}},ro:{hint:"Atinge sau trage fișierul aici",loading:"Se încarcă",noSupported:"Browser-ul tău nu suportă acest feature. Te rugăm încearcă cu alt browser.",success:"S-a încărcat cu succes",fail:"A apărut o problemă la încărcare",preview:"Previzualizează",btn:{off:"Anulează",close:"Închide",back:"Înapoi",save:"Salvează"},error:{onlyImg:"Doar imagini",outOfSize:"Imaginea depășește limita de: ",loewstPx:"Imaginea este prea mică; Minim: "}},ru:{hint:"Нажмите, или перетащите файл в это окно",loading:"Загружаю……",noSupported:"Ваш браузер не поддерживается, пожалуйста, используйте IE10 + или другие браузеры",success:"Загрузка выполнена успешно",fail:"Ошибка загрузки",preview:"Предпросмотр",btn:{off:"Отменить",close:"Закрыть",back:"Назад",save:"Сохранить"},error:{onlyImg:"Только изображения",outOfSize:"Изображение превышает предельный размер: ",lowestPx:"Минимальный размер изображения: "}},"pt-br":{hint:"Clique ou arraste o arquivo aqui para carregar",loading:"Carregando…",noSupported:"Browser não suportado, use o IE10+ ou outro browser",success:"Sucesso ao carregar imagem",fail:"Falha ao carregar imagem",preview:"Pré-visualizar",btn:{off:"Cancelar",close:"Fechar",back:"Voltar",save:"Salvar"},error:{onlyImg:"Apenas imagens",outOfSize:"A imagem excede o limite de tamanho: ",lowestPx:"O tamanho da imagem é muito pequeno. Tamanho mínimo: "}},fr:{hint:"Cliquez ou glissez le fichier ici.",loading:"Téléchargement…",noSupported:"Votre navigateur n'est pas supporté. Utilisez IE10 + ou un autre navigateur s'il vous plaît.",success:"Téléchargement réussit",fail:"Téléchargement echoué",preview:"Aperçu",btn:{off:"Annuler",close:"Fermer",back:"Retour",save:"Enregistrer"},error:{onlyImg:"Image uniquement",outOfSize:"L'image sélectionnée dépasse la taille maximum: ",lowestPx:"L'image sélectionnée est trop petite. Dimensions attendues: "}},nl:{hint:"Klik hier of sleep een afbeelding in dit vlak",loading:"Uploaden…",noSupported:"Je browser wordt helaas niet ondersteund. Gebruik IE10+ of een andere browser.",success:"Upload succesvol",fail:"Upload mislukt",preview:"Voorbeeld",btn:{off:"Annuleren",close:"Sluiten",back:"Terug",save:"Opslaan"},error:{onlyImg:"Alleen afbeeldingen",outOfSize:"De afbeelding is groter dan: ",lowestPx:"De afbeelding is te klein! Minimale afmetingen: "}},tr:{hint:"Tıkla veya yüklemek istediğini buraya sürükle",loading:"Yükleniyor…",noSupported:"Tarayıcı desteklenmiyor, lütfen IE10+ veya farklı tarayıcı kullanın",success:"Yükleme başarılı",fail:"Yüklemede hata oluştu",preview:"Önizle",btn:{off:"İptal",close:"Kapat",back:"Geri",save:"Kaydet"},error:{onlyImg:"Sadece resim",outOfSize:"Resim yükleme limitini aşıyor: ",lowestPx:"Resmin boyutu çok küçük. En az olması gereken: "}},"es-MX":{hint:"Selecciona o arrastra una imagen",loading:"Subiendo...",noSupported:"Tu navegador no es soportado, porfavor usa IE10+ u otros navegadores mas recientes",success:"Subido exitosamente",fail:"Sucedió un error",preview:"Vista previa",btn:{off:"Cancelar",close:"Cerrar",back:"Atras",save:"Guardar"},error:{onlyImg:"Unicamente imagenes",outOfSize:"La imagen excede el tamaño maximo:",lowestPx:"La imagen es demasiado pequeño. Se espera por lo menos:"}},de:{hint:"Klick hier oder zieh eine Datei hier rein zum Hochladen",loading:"Hochladen…",noSupported:"Browser wird nicht unterstützt, bitte verwende IE10+ oder andere Browser",success:"Upload erfolgreich",fail:"Upload fehlgeschlagen",preview:"Vorschau",btn:{off:"Abbrechen",close:"Schließen",back:"Zurück",save:"Speichern"},error:{onlyImg:"Nur Bilder",outOfSize:"Das Bild ist zu groß: ",lowestPx:"Das Bild ist zu klein. Mindestens: "}},ja:{hint:"クリック・ドラッグしてファイルをアップロード",loading:"アップロード中...",noSupported:"このブラウザは対応されていません。IE10+かその他の主要ブラウザをお使いください。",success:"アップロード成功",fail:"アップロード失敗",preview:"プレビュー",btn:{off:"キャンセル",close:"閉じる",back:"戻る",save:"保存"},error:{onlyImg:"画像のみ",outOfSize:"画像サイズが上限を超えています。上限: ",lowestPx:"画像が小さすぎます。最小サイズ: "}}},l={jpg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",psd:"image/photoshop"},c=(a("ace4"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),function(e,t){e=e.split(",")[1],e=window.atob(e);for(var a=new Uint8Array(e.length),i=0;i<e.length;i++)a[i]=e.charCodeAt(i);return new Blob([a],{type:t})}),u=function(e,t){var a=Object.assign({ele:e.target,type:"hit",bgc:"rgba(0, 0, 0, 0.15)"},t),i=a.ele;if(i){var s=i.getBoundingClientRect(),r=i.querySelector(".e-ripple");switch(r?r.className="e-ripple":(r=document.createElement("span"),r.className="e-ripple",r.style.height=r.style.width=Math.max(s.width,s.height)+"px",i.appendChild(r)),a.type){case"center":r.style.top=s.height/2-r.offsetHeight/2+"px",r.style.left=s.width/2-r.offsetWidth/2+"px";break;default:r.style.top=e.pageY-s.top-r.offsetHeight/2-document.body.scrollTop+"px",r.style.left=e.pageX-s.left-r.offsetWidth/2-document.body.scrollLeft+"px"}return r.style.backgroundColor=a.bgc,r.className="e-ripple z-active",!1}},h={props:{field:{type:String,default:"avatar"},ki:{type:Number,default:0},value:{type:Boolean,default:!0},url:{type:String,default:""},params:{type:Object,default:null},headers:{type:Object,default:null},width:{type:Number,default:200},height:{type:Number,default:200},noRotate:{type:Boolean,default:!0},noCircle:{type:Boolean,default:!1},noSquare:{type:Boolean,default:!1},maxSize:{type:Number,default:10240},langType:{type:String,default:"zh"},langExt:{type:Object,default:null},imgFormat:{type:String,default:"png"},withCredentials:{type:Boolean,default:!1}},data:function(){var e=this.imgFormat,t=this.langType,a=this.langExt,i=this.width,s=this.height,r=!0,o=["jpg","png"],c=-1===o.indexOf(e)?"jpg":e,u=n[t]?n[t]:n["en"],h=l[c];return this.imgFormat=c,a&&Object.assign(u,a),"function"!==typeof FormData&&(r=!1),{mime:h,lang:u,isSupported:r,isSupportTouch:document.hasOwnProperty("ontouchstart"),step:1,loading:0,progress:0,hasError:!1,errorMsg:"",ratio:i/s,sourceImg:null,sourceImgUrl:"",createImgUrl:"",sourceImgMouseDown:{on:!1,mX:0,mY:0,x:0,y:0},previewContainer:{width:100,height:100},sourceImgContainer:{width:240,height:184},scale:{zoomAddOn:!1,zoomSubOn:!1,range:1,rotateLeft:!1,rotateRight:!1,degree:0,x:0,y:0,width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,naturalWidth:0,naturalHeight:0}}},computed:{progressStyle:function(){var e=this.progress;return{width:e+"%"}},sourceImgStyle:function(){var e=this.scale,t=this.sourceImgMasking,a=e.y+t.y+"px",i=e.x+t.x+"px";return{top:a,left:i,width:e.width+"px",height:e.height+"px",transform:"rotate("+e.degree+"deg)","-ms-transform":"rotate("+e.degree+"deg)","-moz-transform":"rotate("+e.degree+"deg)","-webkit-transform":"rotate("+e.degree+"deg)","-o-transform":"rotate("+e.degree+"deg)"}},sourceImgMasking:function(){var e=this.width,t=this.height,a=this.ratio,i=this.sourceImgContainer,s=i,r=s.width/s.height,o=0,n=0,l=s.width,c=s.height,u=1;return a<r&&(u=s.height/t,l=s.height*a,o=(s.width-l)/2),a>r&&(u=s.width/e,c=s.width/a,n=(s.height-c)/2),{scale:u,x:o,y:n,width:l,height:c}},sourceImgShadeStyle:function(){var e=this.sourceImgMasking,t=this.sourceImgContainer,a=t,i=e,s=i.width===a.width?i.width:(a.width-i.width)/2,r=i.height===a.height?i.height:(a.height-i.height)/2;return{width:s+"px",height:r+"px"}},previewStyle:function(){var e=this.ratio,t=this.previewContainer,a=t,i=a.width,s=a.height,r=i/s;return e<r&&(i=a.height*e),e>r&&(s=a.width/e),{width:i+"px",height:s+"px"}}},watch:{value:function(e){e&&1!==this.loading&&this.reset()}},created:function(){document.addEventListener("keyup",this.closeHandler)},destroyed:function(){document.removeEventListener("keyup",this.closeHandler)},methods:{ripple:function(e){u(e)},off:function(){var e=this;setTimeout((function(){e.$emit("input",!1),e.$emit("close"),3===e.step&&2===e.loading&&e.setStep(1)}),200)},setStep:function(e){var t=this;setTimeout((function(){t.step=e}),200)},preventDefault:function(e){return e.preventDefault(),!1},handleClick:function(e){1!==this.loading&&e.target!==this.$refs.fileinput&&(e.preventDefault(),document.activeElement!==this.$refs&&this.$refs.fileinput.click())},handleChange:function(e){if(e.preventDefault(),1!==this.loading){var t=e.target.files||e.dataTransfer.files;this.reset(),this.checkFile(t[0])&&this.setSourceImg(t[0])}},checkFile:function(e){var t=this.lang,a=this.maxSize;return-1===e.type.indexOf("image")?(this.hasError=!0,this.errorMsg=t.error.onlyImg,!1):!(e.size/1024>a)||(this.hasError=!0,this.errorMsg=t.error.outOfSize+a+"kb",!1)},reset:function(){this.loading=0,this.hasError=!1,this.errorMsg="",this.progress=0},setSourceImg:function(e){var t=this,a=new FileReader;a.onload=function(e){t.sourceImgUrl=a.result,t.startCrop()},a.readAsDataURL(e)},startCrop:function(){var e=this,t=this.width,a=this.height,i=this.ratio,s=this.scale,r=this.sourceImgUrl,o=this.sourceImgMasking,n=this.lang,l=o,c=new Image;c.src=r,c.onload=function(){var r=c.naturalWidth,o=c.naturalHeight,u=r/o,h=l.width,d=l.height,m=0,p=0;if(r<t||o<a)return e.hasError=!0,e.errorMsg=n.error.lowestPx+t+"*"+a,!1;i>u&&(d=h/u,p=(l.height-d)/2),i<u&&(h=d*u,m=(l.width-h)/2),s.range=0,s.x=m,s.y=p,s.width=h,s.height=d,s.degree=0,s.minWidth=h,s.minHeight=d,s.maxWidth=r*l.scale,s.maxHeight=o*l.scale,s.naturalWidth=r,s.naturalHeight=o,e.sourceImg=c,e.createImg(),e.setStep(2)}},imgStartMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,a=this.sourceImgMouseDown,i=this.scale,s=a;s.mX=t.screenX,s.mY=t.screenY,s.x=i.x,s.y=i.y,s.on=!0},imgMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,a=this.sourceImgMouseDown,i=a.on,s=a.mX,r=a.mY,o=a.x,n=a.y,l=this.scale,c=this.sourceImgMasking,u=c,h=t.screenX,d=t.screenY,m=h-s,p=d-r,g=o+m,_=n+p;i&&(g>0&&(g=0),_>0&&(_=0),g<u.width-l.width&&(g=u.width-l.width),_<u.height-l.height&&(_=u.height-l.height),l.x=g,l.y=_)},startRotateRight:function(e){var t=this,a=this.scale;a.rotateRight=!0;var i=function e(){if(a.rotateRight){var i=++a.degree;t.createImg(i),setTimeout((function(){e()}),60)}};i()},startRotateLeft:function(e){var t=this,a=this.scale;a.rotateLeft=!0;var i=function e(){if(a.rotateLeft){var i=--a.degree;t.createImg(i),setTimeout((function(){e()}),60)}};i()},endRotate:function(){var e=this.scale;e.rotateLeft=!1,e.rotateRight=!1},startZoomAdd:function(e){var t=this,a=this.scale;a.zoomAddOn=!0;var i=function e(){if(a.zoomAddOn){var i=a.range>=100?100:++a.range;t.zoomImg(i),setTimeout((function(){e()}),60)}};i()},endZoomAdd:function(e){this.scale.zoomAddOn=!1},startZoomSub:function(e){var t=this,a=this.scale;a.zoomSubOn=!0;var i=function e(){if(a.zoomSubOn){var i=a.range<=0?0:--a.range;t.zoomImg(i),setTimeout((function(){e()}),60)}};i()},endZoomSub:function(e){var t=this.scale;t.zoomSubOn=!1},zoomChange:function(e){this.zoomImg(e.target.value)},zoomImg:function(e){var t=this,a=this.sourceImgMasking,i=this.scale,s=i.maxWidth,r=i.maxHeight,o=i.minWidth,n=i.minHeight,l=i.width,c=i.height,u=i.x,h=i.y,d=a,m=d.width,p=d.height,g=o+(s-o)*e/100,_=n+(r-n)*e/100,f=m/2-g/l*(m/2-u),b=p/2-_/c*(p/2-h);f>0&&(f=0),b>0&&(b=0),f<m-g&&(f=m-g),b<p-_&&(b=p-_),i.x=f,i.y=b,i.width=g,i.height=_,i.range=e,setTimeout((function(){i.range===e&&t.createImg()}),300)},createImg:function(e){var t=this.mime,a=this.sourceImg,i=this.scale,s=i.x,r=i.y,o=i.width,n=i.height,l=i.degree,c=this.sourceImgMasking.scale,u=this.$refs.canvas,h=u.getContext("2d");e&&(this.sourceImgMouseDown.on=!1),u.width=this.width,u.height=this.height,h.clearRect(0,0,this.width,this.height),h.fillStyle="#fff",h.fillRect(0,0,this.width,this.height),h.translate(.5*this.width,.5*this.height),h.rotate(Math.PI*l/180),h.translate(.5*-this.width,.5*-this.height),h.drawImage(a,s/c,r/c,o/c,n/c),this.createImgUrl=u.toDataURL(t)},prepareUpload:function(){var e=this.url,t=this.createImgUrl,a=this.field,i=this.ki;this.$emit("crop-success",t,a,i),"string"===typeof e&&e?this.upload():this.off()},upload:function(){var e=this,t=this.lang,a=this.imgFormat,i=this.mime,s=this.url,n=this.params,l=this.field,u=this.ki,h=this.createImgUrl,d=new FormData;d.append(l,c(h,i),l+"."+a),"object"===Object(r["a"])(n)&&n&&Object.keys(n).forEach((function(e){d.append(e,n[e])})),this.reset(),this.loading=1,this.setStep(3),Object(o["a"])({url:s,method:"post",data:d}).then((function(t){e.loading=2,e.$emit("crop-upload-success",t.data)})).catch((function(a){e.value&&(e.loading=3,e.hasError=!0,e.errorMsg=t.fail,e.$emit("crop-upload-fail",a,l,u))}))},closeHandler:function(e){!this.value||"Escape"!==e.key&&27!==e.keyCode||this.off()}}},d=h,m=(a("6a3f"),a("2877")),p=Object(m["a"])(d,i,s,!1,null,null,null);t["a"]=p.exports},9542:function(e,t,a){},abbd:function(e,t,a){"use strict";a("9542")},afd9:function(e,t,a){"use strict";a("7563")},f1f3:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{class:e.schema.btn.class?e.schema.btn.class:"",style:e.schema.btn.style?e.schema.btn.style:"",attrs:{type:e.schema.btn.type?e.schema.btn.type:"primary",icon:e.schema.btn.icon?e.schema.btn.icon:"",size:e.schema.btn.size?e.schema.btn.size:""},on:{click:e.dialogClick}},[e._v(" "+e._s(e.schema.btn.title)+" ")]),a("el-table",{attrs:{data:e.selectRows,"default-expand-all":!0,"row-key":function(t){return t[e.tableRowKey].toString()},border:"",fit:"","highlight-current-row":""}},[e._l(e.tableColumnsSchema,(function(t,i){return a("el-table-column",{key:i,attrs:{align:t.align?t.align:"","class-name":t.class?t.class:"",width:t.width?t.width:"",label:t.title},scopedSlots:e._u([{key:"default",fn:function(s){var r=s.row;return["avatar"===t.type?a("el-image",{staticClass:"img-circle",attrs:{src:r[i]}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),a("span",{staticClass:"dot"},[e._v("...")])])]):"image"===t.type?a("el-image",{attrs:{src:r[i]}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),a("span",{staticClass:"dot"},[e._v("...")])])]):"tag"===t.type?[t.tag&&t.tag[r[i]]?a("el-tag",{attrs:{type:t.tag[r[i]].type}},[e._v(e._s(t.tag[r[i]].message))]):e._e()]:a("span",[e._v(e._s(r[i]))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.delSelectRows(i)}}},[e._v("移除")])]}}])})],2),a("el-dialog",{staticClass:"store-dialog",attrs:{width:"75%",title:e.schema.title,visible:e.dialogVisible,"close-on-click-modal":!1,"before-close":e.closeDialog,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"filter-container"},[e._l(e.headerFiltersSchema,(function(t,i){return[a("el-input",{key:i,class:t.class?t.class:"filter-item",style:t.style?t.style:"width: 200px;",attrs:{type:t.type?t.type:"input",placeholder:t.placeholder?t.placeholder:"",clearable:!!t.clearable&&t.clearable},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getTableData(t)}},model:{value:e.tableQuery[i],callback:function(t){e.$set(e.tableQuery,i,t)},expression:"tableQuery[index]"}})]})),e._l(e.headerActionsSchema,(function(t,i){return a("el-button",{key:i,class:t.class?t.class:"filter-item",style:t.style?t.style:"",attrs:{type:t.type?t.type:"primary",icon:t.icon?t.icon:"",size:t.size?t.size:""},on:{click:function(a){return e.handleActions(t)}}},[e._v(" "+e._s(t.title)+" ")])}))],2),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:e.tableData,"default-expand-all":!0,"row-key":function(t){return t[e.tableRowKey].toString()},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center","reserve-selection":!0,width:"50"}}),e._l(e.tableColumnsSchema,(function(t,i){return a("el-table-column",{key:i,attrs:{align:t.align?t.align:"","class-name":t.class?t.class:"",width:t.width?t.width:"",label:t.title},scopedSlots:e._u([{key:"default",fn:function(s){var r=s.row;return["avatar"===t.type?a("el-image",{staticClass:"img-circle",attrs:{src:r[i]}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),a("span",{staticClass:"dot"},[e._v("...")])])]):"image"===t.type?a("el-image",{attrs:{src:r[i]}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(" 加载中"),a("span",{staticClass:"dot"},[e._v("...")])])]):"tag"===t.type?[t.tag&&t.tag[r[i]]?a("el-tag",{attrs:{type:t.tag[r[i]].type}},[e._v(e._s(t.tag[r[i]].message))]):e._e()]:a("span",[e._v(e._s(r[i]))])]}}],null,!0)})}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableTotal>0,expression:"tableTotal>0"}],attrs:{align:"center",total:e.tableTotal,page:e.tableQuery.page,limit:e.tableQuery.page_size},on:{"update:page":function(t){return e.$set(e.tableQuery,"page",t)},"update:limit":function(t){return e.$set(e.tableQuery,"page_size",t)},pagination:e.getTableData}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveDialog}},[e._v("确 定")])],1)],1)],1)},s=[],r=a("c7eb"),o=a("1da1"),n=(a("4de4"),a("d3b7"),a("4ec9"),a("b64b"),a("6062"),a("159b"),a("b775")),l=a("333d"),c={name:"SchemaDialogTable",components:{Pagination:l["a"]},props:{dialogSchema:{type:Object,default:function(){return{}}},dialogRelData:{type:Array,default:function(){return[]}}},data:function(){return{schema:{},headerSchema:{},headerFiltersSchema:{},headerActionsSchema:{},tableSchema:{},tableColumnsSchema:{},loading:!1,tableURI:"",tableRowKey:"id",tableMethod:"get",tableQuery:{page:1,page_size:20},tableData:[],tableTotal:0,dialogVisible:!1,multipleSelection:[],selectRows:[],selection:[]}},watch:{dialogSchema:{immediate:!0,handler:function(e){this.schema=e,this.setSchema()}},dialogRelData:{immediate:!0,handler:function(e){e.length>0&&this.getSelectRows(e)}}},methods:{setSchema:function(){this.schema.dialog.header&&(this.headerSchema=this.schema.dialog.header),this.schema.dialog.table&&(this.tableSchema=this.schema.dialog.table),this.headerSchema.filter&&(this.headerFiltersSchema=this.headerSchema.filter),this.headerSchema.actions&&(this.headerActionsSchema=this.headerSchema.actions),this.tableSchema.url&&(this.tableURI=this.tableSchema.url.const),this.tableSchema.method&&(this.tableMethod=this.tableSchema.url.method),this.tableSchema.page&&(this.tableQuery.page=this.tableSchema.page),this.tableSchema.page_size&&(this.tableQuery.page_size=this.tableSchema.page_size),this.tableSchema.key&&(this.tableRowKey=this.tableSchema.key),this.tableSchema.columns&&(this.tableColumnsSchema=this.tableSchema.columns),this.tableURI&&this.getTableData()},getTableData:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,a={url:e.tableURI,method:e.tableMethod},t.t0=a.method,t.next="get"===t.t0?5:"post"===t.t0?7:9;break;case 5:return a.params=e.tableQuery,t.abrupt("break",9);case 7:return a.data=e.tableQuery,t.abrupt("break",9);case 9:Object(n["a"])(a).then((function(t){0===t["code"]&&(e.tableData=t.data.list,e.tableTotal=t.data.total,e.toggleRowSelection()),e.loading=!1}));case 10:case"end":return t.stop()}}),t)})))()},getSelectRows:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var i;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={url:t.tableURI,method:t.tableMethod},a.t0=i.method,a.next="get"===a.t0?4:"post"===a.t0?7:10;break;case 4:return i.params={page_size:-1},i.params[t.tableRowKey]=e,a.abrupt("break",10);case 7:return i.data={page_size:-1},i.data[t.tableRowKey]=e,a.abrupt("break",10);case 10:Object(n["a"])(i).then((function(e){0===e["code"]&&(t.selectRows=e.data.list)}));case 11:case"end":return a.stop()}}),a)})))()},delSelectRows:function(e){var t=this;this.selectRows=structuredClone(this.selectRows.filter((function(a){return a[t.tableRowKey]!==e[t.tableRowKey]})))},handleActions:function(e){this.requestActions(e,this.tableQuery)},requestActions:function(e,t){var a=this;return Object(o["a"])(Object(r["a"])().mark((function i(){var s,o,l,c;return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.loading=!0,s={url:e.url.const,method:"get"},e.url.method&&(s.method=e.url.method),!e.url.query){i.next=13;break}for(l in o={},e.url.query)c=e.url.query[l],t[c]&&(o[c]=t[c]);i.t0=s.method,i.next="get"===i.t0?9:"post"===i.t0?11:13;break;case 9:return s.params=o,i.abrupt("break",13);case 11:return s.data=o,i.abrupt("break",13);case 13:Object(n["a"])(s).then((function(t){0===t["code"]&&e.url["refresh"]?a.getTableData():0===t["code"]&&e["is_search"]?(a.tableData=t.data.list,a.tableTotal=t.data.total,a.toggleRowSelection(),a.loading=!1):a.loading=!1}));case 14:case"end":return i.stop()}}),i)})))()},dialogClick:function(){var e=this;this.multipleSelection=structuredClone(this.selectRows),this.dialogVisible=!0,this.$nextTick((function(){e.toggleRowSelection()}))},toggleRowSelection:function(){var e=this;if(this.$refs.multipleTable){var t=[];this.multipleSelection.forEach((function(a){t.push(a[e.tableRowKey])})),this.selection=[],this.$refs.multipleTable.clearSelection(),this.tableData.forEach((function(a){t.indexOf(a[e.tableRowKey])>-1&&(e.$refs.multipleTable.toggleRowSelection(a),e.selection.push(a))}))}},handleSelectionChange:function(e){var t=this,a=[],i=[];e.forEach((function(e){a.push(e[t.tableRowKey])})),this.selection.forEach((function(e){-1===a.indexOf(e[t.tableRowKey])&&i.push(e[t.tableRowKey])})),this.multipleSelection=structuredClone(this.multipleSelection.filter((function(e){return-1===i.indexOf(e[t.tableRowKey])})));var s=[];this.multipleSelection.forEach((function(e){s.push(e[t.tableRowKey])})),e.forEach((function(e){-1===s.indexOf(e[t.tableRowKey])&&t.multipleSelection.push(e)})),this.selection=e},closeDialog:function(){this.multipleSelection=[],this.$refs.multipleTable.clearSelection(),this.dialogVisible=!1},saveDialog:function(){var e=this;this.selectRows=structuredClone(this.multipleSelection);var t=[];this.selectRows.forEach((function(a){a[e.tableRowKey]&&t.push(a[e.tableRowKey])})),this.$emit("check-change",t),this.closeDialog()}}},u=c,h=a("2877"),d=Object(h["a"])(u,i,s,!1,null,"44d1fa6a",null);t["a"]=d.exports}}]);