(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3981bc5b"],{"4ef9":function(a,e,t){"use strict";t("fab6")},f27d:function(a,e,t){"use strict";t.r(e);var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"app-container"},[t("el-form",{ref:"ruleForm",attrs:{model:a.ruleForm,rules:a.rules,"label-position":"right","label-width":"100px"}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[a._v("基础信息")])]),t("div",{staticClass:"card-body"},[t("el-row",{attrs:{gutter:a.layout.gutter}},[t("el-col",{attrs:{xs:a.layout.xs,sm:a.layout.sm,md:a.layout.md,lg:a.layout.lg}},[t("el-form-item",{attrs:{label:"商品标题",prop:"spu_name"}},[t("el-input",{attrs:{type:"text",placeholder:"请输入商品标题",clearable:""},model:{value:a.ruleForm.spu_name,callback:function(e){a.$set(a.ruleForm,"spu_name",e)},expression:"ruleForm.spu_name"}})],1)],1),t("el-col",{attrs:{xs:a.layout.xs,sm:a.layout.sm,md:a.layout.md,lg:a.layout.lg}},[t("el-form-item",{attrs:{label:"商品分类",prop:"category_ids"}},[t("el-cascader",{attrs:{options:a.goodsCategoryData,props:{multiple:!0},"collapse-tags":"",clearable:""},model:{value:a.ruleForm.category_ids,callback:function(e){a.$set(a.ruleForm,"category_ids",e)},expression:"ruleForm.category_ids"}})],1)],1),t("el-col",{attrs:{xs:a.layout.xs,sm:a.layout.sm,md:a.layout.md,lg:a.layout.lg}},[t("el-form-item",{attrs:{label:"商品价格",prop:"price_min"}},[t("el-input",{attrs:{placeholder:"请输入商品价格，单位分",clearable:""},model:{value:a.ruleForm.price_min,callback:function(e){a.$set(a.ruleForm,"price_min",a._n(e))},expression:"ruleForm.price_min"}})],1)],1),t("el-col",{attrs:{span:a.layout.gutter}},[t("el-form-item",{attrs:{label:"商品描述",prop:"spu_brief"}},[t("el-input",{attrs:{type:"textarea"},model:{value:a.ruleForm.spu_brief,callback:function(e){a.$set(a.ruleForm,"spu_brief",e)},expression:"ruleForm.spu_brief"}})],1)],1),t("el-col",{attrs:{span:a.layout.gutter}},[t("el-form-item",{attrs:{label:"商品缩略图",prop:"spu_thumb"}},[t("schema-dialog-upload-img",{attrs:{"dialog-rel-img":a.ruleForm.spu_thumb},on:{"check-change":function(e){return a.dialogUploadImgChange("spu_thumb",e)}}})],1)],1),t("el-col",{attrs:{span:a.layout.gutter}},[t("el-form-item",{attrs:{label:"商品轮播图",prop:"spu_images"}},[t("schema-dialog-upload-img",{attrs:{num:9,"dialog-rel-data":a.ruleForm.spu_images},on:{"check-change":function(e){return a.dialogUploadImgChange("spu_images",e)}}})],1)],1)],1)],1)]),t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[a._v("商品参数")]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"mini"},on:{click:a.choseGoodsParams}},[a._v("选择参数")])],1),t("el-form-item",{attrs:{prop:"params_value","label-width":"0"}},[t("div",{staticClass:"card-body"},[t("el-row",{attrs:{gutter:a.layout.gutter}},a._l(a.goodsParamsData,(function(e,o){return t("el-col",{key:o,attrs:{xs:a.layout.xs,sm:a.layout.sm,md:a.layout.md,lg:a.layout.lg}},[t("el-form-item",{attrs:{label:e.label}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.ruleForm.params_value[e.id],callback:function(t){a.$set(a.ruleForm.params_value,e.id,t)},expression:"ruleForm.params_value[item.id]"}},a._l(e.options,(function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1)],1)})),1)],1)])],1),t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[a._v("图文详情")])]),t("el-form-item",{attrs:{prop:"spu_intro","label-width":"0"}},[t("div",{staticClass:"card-body"},[t("Tinymce",{ref:"editor",attrs:{height:500},model:{value:a.ruleForm.spu_intro,callback:function(e){a.$set(a.ruleForm,"spu_intro",e)},expression:"ruleForm.spu_intro"}})],1)])],1)],1),t("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:a.resetForm}},[a._v("重置")]),t("el-button",{attrs:{type:"primary"},on:{click:a.updateGoodsSpu}},[a._v("保存")])],1),t("chose-dialog-goods-params",{attrs:{visible:a.goodsParamsDialogVisible,"dialog-rel-data":a.goodsParamsIds},on:{change:a.choseGoodsParamsValueChange,close:a.closeChoseDialogGoodsParams}})],1)},r=[],l=(t("d3b7"),t("159b"),t("373c")),s=t("87e8"),i=t("8256"),u=t("c54e"),n=t("4f20"),m=t("090a"),d=t("385f"),c={name:"GoodsSpuUpdate",components:{SchemaDialogUploadImg:l["a"],ChoseDialogGoodsParams:s["a"],Tinymce:i["a"]},data:function(){return{loading:!1,layout:d["a"],goodsCategoryData:[],goodsParamsIds:[],goodsParamsData:[],ruleForm:{spu_name:"",spu_brief:"",price_min:"",spu_thumb:"",spu_images:[],spu_intro:"",category_ids:[],brand_ids:[],params_value:{}},rules:m["a"],goodsParamsDialogVisible:!1}},mounted:function(){this.getGoodsCategoryData(),this.getGoodsSpuInfo()},methods:{getGoodsCategoryData:function(){var a=this;this.loading=!0,Object(u["a"])().then((function(e){a.goodsCategoryData=e.data})).finally((function(){a.loading=!1}))},getGoodsSpuInfo:function(){var a=this;Object(n["b"])(this.$route.query).then((function(e){for(var t in a.ruleForm)e.data[t]&&(a.ruleForm[t]=e.data[t]);e.data["params_value_data"]&&a.choseGoodsParamsValueChange(e.data["params_value_data"])}))},dialogUploadImgChange:function(a,e){this.ruleForm[a]=e},choseGoodsParams:function(){this.goodsParamsDialogVisible=!0},choseGoodsParamsValueChange:function(a){var e=[],t=[];a.forEach((function(a){var o=[];a.params_value.forEach((function(a){o.push({label:a["params_value_name"],value:a["params_value_id"]})})),t.push(a.params_id),e.push({id:a.params_id,label:a.params_name,options:o})})),this.goodsParamsData=e,this.goodsParamsIds=t},closeChoseDialogGoodsParams:function(){this.goodsParamsDialogVisible=!1},resetForm:function(){this.$refs["ruleForm"].resetFields()},updateGoodsSpu:function(){var a=this;this.$refs["ruleForm"].validate((function(e){if(!e)return!1;a.loading=!0,Object(n["d"])(a.$route.query,a.ruleForm).then((function(e){0===e["code"]&&(a.$notify.success("修改成功"),a.$router.go(-1))})).finally((function(){a.loading=!1}))}))}}},p=c,g=(t("4ef9"),t("2877")),f=Object(g["a"])(p,o,r,!1,null,"25beaf2a",null);e["default"]=f.exports},fab6:function(a,e,t){}}]);