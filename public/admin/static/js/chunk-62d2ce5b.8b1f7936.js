(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62d2ce5b"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),Math.easeInOutQuad=function(t,e,a,n){return t/=n/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function i(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,a){var l=o(),r=t-l,s=20,u=0;e="undefined"===typeof e?500:e;var c=function t(){u+=s;var o=Math.easeInOutQuad(u,l,r,e);i(o),u<e?n(t):a&&"function"===typeof a&&a()};c()}},"4f20":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:"/goods/spu/info",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/goods/spu/list",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/goods/spu/create",method:"post",data:t})}function r(t,e){return Object(n["a"])({url:"/goods/spu/update",method:"post",data:{filter:t,params:e}})}function s(t,e){return Object(n["a"])({url:"/goods/spu/update_some",method:"post",data:{filter:t,params:e}})}},e2a2:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v(" 添加商品 ")])],1),a("div",{staticClass:"schema-filter schema-filter-extend"},[a("div",{ref:"schema_filter_items",staticClass:"schema-filter-items"},[a("div",{ref:"schema_filter_form_box"},[a("el-form",{ref:"filterForm",attrs:{inline:!0}},[a("el-form-item",{staticClass:"schema-filter-items-form-item",attrs:{label:"商品名称"}},[a("el-input",{attrs:{type:"input",placeholder:"请输入商品名称",clearable:""},model:{value:t.tableQuery.spu_name,callback:function(e){t.$set(t.tableQuery,"spu_name",e)},expression:"tableQuery.spu_name"}})],1)],1)],1)]),a("div",{staticClass:"schema-filter-actions"},[a("div",{staticClass:"schema-filter-actions-btn"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查询")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh-left"},on:{click:t.resetFilterForm}},[t._v("重置")])],1),t.showExtend?a("div",{staticClass:"schema-filter-actions-extend"},[a("el-button",{class:t.extend?"el-icon-arrow-down":"el-icon-arrow-up",attrs:{type:"text"},on:{click:t.handleExtend}},[t._v(t._s(t.extend?"展开":"收起"))])],1):t._e()])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dragTable",attrs:{data:t.tableData,"default-expand-all":!0,"row-key":function(e){return e[t.tableRowKey].toString()},border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleUpdate(n)}}},[t._v("编辑")]),"on_sale"===n.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleUpdateSome(n,{status:"off_sale"},"确定要下架商品: "+n.spu_name)}}},[t._v("下架")]):a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleUpdateSome(n,{status:"on_sale"},"确定要上架商品: "+n.spu_name)}}},[t._v("上架")])]}}])}),a("el-table-column",{attrs:{prop:"spu_name",label:"商品名称"}}),a("el-table-column",{attrs:{align:"center",label:"商品状态"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return["on_sale"===n.status?a("el-tag",{attrs:{type:"success"}},[t._v("上架")]):"off_sale"===n.status?a("el-tag",{attrs:{type:"warning"}},[t._v("下架")]):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品缩略图"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-image",{staticClass:"table-image",attrs:{src:n.spu_thumb}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])]}}])}),a("el-table-column",{attrs:{prop:"price_min",label:"商品价格"}})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.tableTotal>0,expression:"tableTotal>0"}],attrs:{align:"center",total:t.tableTotal,page:t.tableQuery.page,limit:t.tableQuery.page_size},on:{"update:page":function(e){return t.$set(t.tableQuery,"page",e)},"update:limit":function(e){return t.$set(t.tableQuery,"page_size",e)},pagination:t.getTableData}})],1)},i=[],o=a("c7eb"),l=a("1da1"),r=(a("d3b7"),a("159b"),a("333d")),s=a("4f20"),u={name:"GoodsSpuList",components:{Pagination:r["a"]},data:function(){return{hasFilter:!1,extend:!0,showExtend:!1,loading:!1,tableRowKey:"spu_id",tableQuery:{page:1,page_size:20},tableData:[],tableTotal:0}},mounted:function(){this.getTableData()},methods:{handleExtend:function(){this.extend=!this.extend},resetFilterForm:function(){this.$refs["filterForm"].resetFields(),this.tableQuery.page=1,this.getTableData()},checkShowExtend:function(){if(!this.hasFilter)return!1;var t=this.$refs.schema_filter_items.clientWidth,e=0,a=1;this.$refs.filterForm.$children.forEach((function(n){e+=n.$el.clientWidth+30,e>t&&(a++,e=n.$el.clientWidth+30)})),this.showExtend=a>2},handleFilter:function(){this.tableQuery.page=1,this.getTableData()},handleCreate:function(){this.$router.push({path:"/goods/spu/create"})},handleUpdate:function(t){this.$router.push({path:"/goods/spu/update",query:{spu_id:t.spu_id}})},handleUpdateSome:function(t,e,a){var n=this;this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.loading=!0,Object(s["e"])({spu_id:t.spu_id},e).then((function(t){0===t["code"]&&n.getTableData()})).finally((function(){n.loading=!1}))}))},getTableData:function(){var t=this;return Object(l["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,Object(s["c"])(t.tableQuery).then((function(e){0===e["code"]&&(t.tableData=e.data.list,t.tableTotal=e.data.total)})).finally((function(){t.loading=!1}));case 2:case"end":return e.stop()}}),e)})))()}}},c=u,d=a("2877"),f=Object(d["a"])(c,n,i,!1,null,"ec1be0b0",null);e["default"]=f.exports}}]);